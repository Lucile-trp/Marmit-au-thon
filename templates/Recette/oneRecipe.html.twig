{% extends"base.html.twig" %}

{% block title %}{{ recipename }} {{ parent() }}{% endblock %}

{% block css %}
    <link rel="stylesheet" href="/assets/oneRecipe.css">
{% endblock %}

{% block body %}
    <div class="container">
        {% if peoples > 1 %}
            <h1>{{ recipename }} - Recette pour {{ peoples }} personnes</h1>
        {% else %}
            <h1>{{ recipename }} - Recette pour {{ peoples }} personne</h1>
        {% endif %}
        <img src="{{ recipeimg|trim('.','left') }}" alt="Image de la recette">
        <h2>Liste des ingredients</h2>
        <ul>
            {% for ingredient in ingredients %}
                <li>{{ ingredient.ingredientName }} ({{ ingredient.quantity }} {{ ingredient.unity }})</li>
            {% endfor %}
        </ul>
        <h2>Etapes de la recette</h2>
        {{ recipedesc|raw }}
        <div class="btn-container">
            <a class="btn btn-mail modal-trigger">Partager cette recette par mail</a>
            <a href="/Recette/generatepdf/{{ idrecipe }}" class="btn btn-pdf">Enregistrer cette recette au format PDF</a>
        </div>

        <div id="modal-mail" class="modal" style="display: none;">
            <div class="modal-container">
                <form action="#" method="post">
                    <label for="destinataire">Adresse mail du destinataire</label>
                    <input type="mail" name="dest-mail" required>
                    <br>
                    <label for="message">Votre message</label>
                    <textarea name="message" cols="30" rows="15">
                        www.marmitothon.local/Recette/oneRecipe/{{ recipeslug }}
                    </textarea>
                    <br>
                    <button type="submit">Donnez faim Ã  vos amis !</button>
                    <button class="modal-close">Fermer</button>
                </form>
            </div>
        </div>
    </div>

    {% block javascript%}
        const modalTrigger = document.querySelector('.modal-trigger')
        const closeModal = document.querySelector('.modal-close')
        const modal = document.querySelector('#modal-mail')

        modalTrigger.addEventListener('click', () => {
            modal.style.display = null
        })
        closeModal.addEventListener('click', () => {
            modal.style.display = "none";
        })
    {% endblock javascript %}
{% endblock body%}